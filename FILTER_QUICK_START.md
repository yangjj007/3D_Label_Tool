# 🚀 模型过滤系统 - 5分钟快速上手

## 第一步：安装依赖（如果还没有）

```bash
# 安装Chart.js用于统计图表
npm install chart.js@^4.4.0
# 或
pnpm install chart.js@^4.4.0
```

如果npm安装失败，可以稍后在需要统计图表时再安装。

## 第二步：启动服务

```bash
# 确保有.env配置文件
cp env.template .env

# 启动完整服务
npm run dev:full
```

访问: http://localhost:9999

## 第三步：准备测试数据

将一些已打标的GLB模型文件放到：
```
files/labeled_files/
```

至少准备3-5个文件用于测试。

## 第四步：计算指标

1. 在UI中切换到 **"已打标"** 视图
2. 点击 **"批量过滤"** 按钮
3. 在弹出的对话框中：
   - 保持默认设置（VVD, VFC, VSC全选）
   - 体素分辨率：64（推荐）
4. 点击 **"开始计算指标"**
5. 等待计算完成（进度条显示实时进度）

**预期时间**: 约10-20秒/文件

## 第五步：查看统计（可选但推荐）

1. 切换到 **"统计分析"** 选项卡
2. 点击 **"加载统计数据"**
3. 查看：
   - 统计表格（了解数据分布）
   - 密度图（直观看到各指标的分布）

这一步帮助你了解模型的实际数据分布，为设置过滤阈值提供参考。

## 第六步：设置过滤条件

回到 **"指标配置"** 选项卡，根据统计结果设置阈值：

**示例配置**（根据你的数据调整）:
```
材质个数: 
  最小值: 2
  最大值: 5

VVD (顶点密度):
  最小值: 1.0
  最大值: 10.0

VFC (面片复杂度):
  最小值: 0.5
  最大值: 8.0

VSC (表面复杂度):
  最小值: 0.2
  最大值: 0.9
```

**提示**: 
- 从宽松的范围开始（覆盖50-80%的数据）
- 根据结果逐步调整
- 参考统计表中的均值±标准差

## 第七步：执行过滤

1. 点击 **"开始过滤"** 按钮
2. 确认操作
3. 等待完成

**结果**: 符合条件的文件会被复制到 `files/filtered_files/`

## 第八步：查看结果

1. 在文件列表中切换到 **"已过滤"** 视图
2. 查看过滤后的文件
3. 文件仍保留在 `labeled_files` 中（复制操作，不是移动）

## 验证结果

随机选择一个过滤后的文件，检查其JSON元数据：

```bash
# Windows PowerShell
cat files/filtered_files/your-model.glb.json | Select-String filterMetrics

# Linux/Mac
cat files/filtered_files/your-model.glb.json | grep -A 15 filterMetrics
```

确认所有指标都在你设置的阈值范围内。

---

## 💡 常见使用场景

### 场景1: 筛选复杂度适中的模型
```
目标: 找到不太简单也不太复杂的模型用于训练
配置:
  材质: 2-5
  VVD: 3-8
  VFC: 2-6
  VSC: 0.3-0.7
```

### 场景2: 筛选高细节模型
```
目标: 找到高精度、细节丰富的模型
配置:
  材质: 3-10
  VVD: 5-20
  VFC: 4-15
  VSC: 0.5-1.0
```

### 场景3: 筛选简单模型
```
目标: 找到简单、规则的模型
配置:
  材质: 1-3
  VVD: 0.5-3
  VFC: 0.3-2
  VSC: 0.1-0.4
```

---

## ⚠️ 注意事项

1. **首次使用**: 建议先用少量文件测试（5-10个）
2. **断点续传**: 已计算过的指标不会重复计算
3. **分辨率**: 保持一致，更改分辨率会重新计算
4. **内存**: 如果浏览器卡顿，降低并发数到1-2
5. **备份**: 过滤前建议备份重要文件

---

## 🎯 核心概念速记

| 指标 | 含义 | 值越高说明 |
|------|------|-----------|
| **材质个数** | 模型使用的材质数量 | 材质更丰富 |
| **VVD** | 顶点密度 | 几何细节更多 |
| **VFC** | 面片复杂度 | 表面更复杂 |
| **VSC** | 表面复杂度 | 形状更不规则 |

---

## 🐛 遇到问题？

### 问题1: Chart.js安装失败
**解决**: 统计图表是可选功能，不影响核心过滤功能。稍后需要时再安装。

### 问题2: 计算很慢
**解决**: 
- 降低体素分辨率到32
- 减少并发数
- 测试更小的模型

### 问题3: 没有文件通过过滤
**解决**: 
- 查看统计数据
- 放宽阈值范围
- 先不设置某些指标（取消勾选）

### 问题4: 浏览器崩溃
**解决**: 
- 关闭其他标签页
- 降低并发数到1
- 使用更小的模型测试

---

## 📚 更多信息

- **完整使用指南**: `FILTER_SYSTEM_README.md`
- **测试验证**: `FILTER_SYSTEM_TESTING.md`  
- **实现总结**: `FILTER_IMPLEMENTATION_SUMMARY.md`

---

## ✅ 快速检查清单

- [ ] 安装了依赖
- [ ] 启动了服务（dev:full）
- [ ] 准备了测试文件（labeled_files）
- [ ] 计算了指标
- [ ] 查看了统计数据
- [ ] 设置了阈值
- [ ] 执行了过滤
- [ ] 验证了结果

**恭喜！你已经掌握了模型过滤系统的基本使用方法！** 🎉

现在可以：
1. 调整阈值重新过滤
2. 处理更多模型
3. 探索高级功能

